# Present Markdown

We will be stuffing a bunch of small markdown examples in localStorage. Let's fetch them and present them in a drawer.

## determine script name
Try extracting the name of the pipedown script from the URL. We are assuming a markdown document is being presented as HTML so the corresponding browser friendly script will be in the ./.pd directory. We're just extracting whatever is after the basePath.

TODO: make the basePath a configurable parameter.
```ts
input.url = input.url || new URL(window.location.href)
input.name = input.url.pathname.split('/').filter(Boolean).filter(part => part !== 'learn-markdownit').find(Boolean) || 'index'
```

## fetchMarkdown
[[evalPipedown]] will drop what it evaluates in localStorage. We will fetch it from there.
```ts
const {markdown} = JSON.parse(localStorage.getItem('evalPipedown::'+input.name) || '{}')
input.markdown = markdown
```

## showDrawerButton
We will add a button to the page to show the drawer, if there's anything to show

- when: /markdown
  ```ts
  document.querySelector('#htmldrawer').classList.remove('hidden')
  console.log(input)
  ```

## presentMarkdown
I am conflicted about whether to show the markdown-it output in an iframe, so be safe, or just render it in a div since I have control over the output and it's not user generated content.

- when: /markdown
  ```ts
  for (const md in input.markdown) {
      const markdownDiv = document.createElement('div')
      markdownDiv.classList.add('prose')

      markdownDiv.innerHTML = `<div class="mockup-window border border-base-400 bg-base-300">
      <code>input.markdown.${md}</code>
    <div class="prose p-5">${input.markdown[md]}</div>
  </div>`
      document.querySelector('#htmldrawerbody').appendChild(markdownDiv)
  }
  ```


```json
{
    "build": ["esm"]
}
```
const markdownDiv = document.createElement('div')

```

```json
{
    "build": ["esm"]
}
```


[//begin]: # "Autogenerated link references for markdown compatibility"
[evalPipedown]: evalPipedown.md "Eval PD"
[//end]: # "Autogenerated link references"


[//begin]: # "Autogenerated link references for markdown compatibility"
[evalPipedown]: evalPipedown.md "Eval PD"
[//end]: # "Autogenerated link references"


[//begin]: # "Autogenerated link references for markdown compatibility"
[evalPipedown]: evalPipedown.md "Eval PD"
[//end]: # "Autogenerated link references"


[//begin]: # "Autogenerated link references for markdown compatibility"
[evalPipedown]: evalPipedown.md "Eval PD"
[//end]: # "Autogenerated link references"